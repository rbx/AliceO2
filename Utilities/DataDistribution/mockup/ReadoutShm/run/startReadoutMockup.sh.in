#!/bin/bash

shmmonitor --cleanup

readoutMockupConfig="@CMAKE_BINARY_DIR@/bin/config/readout-mockup.json"

READOUT="mockupReadoutDevice"
READOUT+=" --id readout"
READOUT+=" --transport shmem"
READOUT+=" --mq-config $readoutMockupConfig"
xterm -geometry 90x57+0+0 -hold -e @CMAKE_BINARY_DIR@/bin/$READOUT &

BUILDER="mockupStfBuilderDevice"
BUILDER+=" --id builder"
BUILDER+=" --transport shmem"
BUILDER+=" --mq-config $readoutMockupConfig"
xterm -geometry 90x57+550+0 -hold -e @CMAKE_BINARY_DIR@/bin/$BUILDER &

HANDLER="mockupStfHandlerDevice"
HANDLER+=" --id handler"
HANDLER+=" --transport shmem"
HANDLER+=" --mq-config $readoutMockupConfig"
xterm -geometry 90x57+1100+0 -hold -e @CMAKE_BINARY_DIR@/bin/$HANDLER &
