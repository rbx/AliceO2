<topology id="myTopology">
    <property id="FLPSyncSamplerInputAddress" />
    <property id="FLPSyncSamplerOutputAddress" />
    <property id="FLPSenderHeartbeatInputAddress" />
    <property id="EPNReceiverInputAddress" />

    <declrequirement id="FLPSyncSamplerHost">
        <hostPattern value="cn48\.internal"/>
    </declrequirement>

    <declrequirement id="FLPSenderHost">
        <hostPattern value="cn(49|50|51|52)\.internal"/>
    </declrequirement>

    <declrequirement id="EPNReceiverHost">
        <hostPattern value="cn(53|54|55|56)\.internal"/>
    </declrequirement>

    <decltask id="flpSyncSampler">
        <exe reachable="true">/home/arybalch/alice/AliceO2/build/bin/flpSyncSampler_dds --id SAMPLER0 --event-rate 100 --input-socket-type pull --input-buff-size 100 --input-method bind --output-socket-type pub --output-buff-size 10 --output-method bind</exe>
        <requirement>FLPSyncSamplerHost</requirement>
        <properties>
            <id access="write">FLPSyncSamplerInputAddress</id>
            <id access="write">FLPSyncSamplerOutputAddress</id>
        </properties>
    </decltask>

    <decltask id="flpSender">
        <exe reachable="true">/home/arybalch/alice/AliceO2/build/bin/flpSender_dds --id FLP%taskIndex% --event-size 100000 --num-inputs 2 --num-epns 64 --input-socket-type sub --input-buff-size 10 --input-method bind --input-rate-logging 0 --input-socket-type sub --input-buff-size 10 --input-method connect --input-rate-logging 0 --output-socket-type push --output-buff-size 10 --output-method connect --output-rate-logging 1 --test-mode 1</exe>
        <requirement>FLPSenderHost</requirement>
        <properties>
            <id access="read">FLPSyncSamplerOutputAddress</id>
            <id access="write">FLPSenderHeartbeatInputAddress</id>
            <id access="read">EPNReceiverInputAddress</id>
        </properties>
    </decltask>

    <decltask id="epnReceiver">
        <exe reachable="true">/home/arybalch/alice/AliceO2/build/bin/epnReceiver_dds --id EPN%taskIndex% --num-flps 64 --input-socket-type pull --input-buff-size 10 --input-method bind --input-rate-logging 1 --output-socket-type pub --output-buff-size 10 --output-method connect --output-rate-logging 0 --nextstep-socket-type pub --nextstep-buff-size 10 --nextstep-method bind --nextstep-rate-logging 0 --rttack-socket-type push --rttack-buff-size 100 --rttack-method connect --rttack-rate-logging 0 --test-mode 1</exe>
        <requirement>EPNReceiverHost</requirement>
        <properties>
            <id access="read">FLPSenderHeartbeatInputAddress</id>
            <id access="write">EPNReceiverInputAddress</id>
            <id access="read">FLPSyncSamplerInputAddress</id>
        </properties>
    </decltask>

    <main id="main">
        <task>flpSyncSampler</task>
        <group id="groupFLP" n="64">
            <task>flpSender</task>
        </group>
        <group id="groupEPN" n="64">
            <task>epnReceiver</task>
        </group>
    </main>
</topology>
